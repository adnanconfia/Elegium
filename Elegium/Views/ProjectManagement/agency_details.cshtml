@{
    ViewData["Title"] = "Actors";
}
<style>
    .thumbnail_overlay {
        width: 100%;
        height: 100%;
        position: absolute;
        text-align: center;
        background-color: rgba(0,0,0,.6);
        color: #fff;
        transition: opacity linear .5s;
        opacity: 0;
        font-size: 15px;
        font-family: 'Work Sans',sans-serif;
        font-weight: 400;
        border-radius: 5px;
        cursor: pointer;
        line-height: 220px;
        display: block;
    }
    .icon_svg {
        width: 60px !important;
    }
    .cat-image:hover .thumbnail_overlay {
        opacity: 1;
    }


    .selectize-control.single .selectize-input {
        background: none !important;
        box-shadow: none !important;
        color: #f4f6f9 !important;
    }

    .dark-mode .selectize-input {
        border-color: #343a40 !important;
        color: #fff !important;
    }

        .dark-mode .selectize-input input {
            color: #fff !important;
        }

    .selectize-input:after {
        background: none !important;
    }

    textarea:focus .comment_info {
        display: block !important;
    }

    textarea:focus {
        border: 1px #0d96ce solid !important;
    }



    textarea {
        height: 160px !important;
        background: none;
        border: 0;
        border: 1px #888 solid;
        color: #363636;
        padding: 5px 10px;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        -moz-transition: border .3s linear;
        -o-transition: border .3s linear;
        -webkit-transition: border .3s linear;
        transition: border .3s linear;
        font-size: 12px;
        font-family: Verdana,Geneva,'DejaVu Sans',sans-serif;
        border-radius: 5px;
    }

    .project-hover-files {
        visibility: hidden;
        display: flex;
    }

        .project-hover-files::before {
            visibility: visible;
            font-size: 20px;
            position: absolute !important;
            opacity: 1 !important;
            border: 3px dashed #0c0;
            height: 100%;
            width: 100%;
            display: inline-block;
            content: "";
        }

        .project-hover-files::after {
            content: "Drop your files here!";
            position: absolute !important;
            height: 20px;
            visibility: visible;
            top: 70%;
            margin-left: 42%;
        }

    .filetype {
        pointer-events: none;
        width: 100% !important;
        height: 130px;
        display: block;
        /* position: absolute; */
        top: 0;
        left: 0;
        background: #272727;
        color: #fff;
        text-align: center;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

        .filetype.preview .extention {
            font-size: 35px;
            line-height: 130px;
        }

        .filetype .extention {
            pointer-events: all;
            font-family: 'Work Sans',sans-serif;
            font-weight: 400;
            text-transform: uppercase;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 90%;
            display: inline-block;
            line-height: 55px;
            font-size: 15px;
        }

    #uppy-uploader {
        font-size: 12px;
        display: none;
        width: 300px !important;
        right: 60px;
        bottom: 20px;
        border-radius: 10px;
        padding: 10px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0,0,0,.5);
        background: #272727 !important;
        z-index: 1;
        display: block;
        position: fixed;
    }

    .slider {
        position: relative;
        text-align: left;
        background: gray;
        height: 0.6em;
    }

        .slider .handle {
            position: absolute;
            z-index: 2;
            width: 1.2em;
            height: 1.2em;
            background-color: #1893C8;
        }

    .handle {
        top: -0.3em;
        margin-left: -0.6em;
    }

    #measuringDoll svg {
        position: inherit !important;
    }

    .slider .range {
        position: absolute;
        z-index: 1;
        display: block;
        font-size: .7em;
        background-color: #1893C8;
        top: 0;
        height: 100%;
    }
    .thumbnail {
        background: rgba(0,0,0,0.5);
        color: white;
        position: absolute;
        top: 0;
        visibility: hidden;
    }

    .thumbnail_content:hover .thumbnail {
        visibility: visible;
    }

    .imgLiquidFill {
        background-size: cover !important;
        background-position: center !important;
    }
</style>
<div class="tab-pane show fade" ui-view="">

    <div class="row mx-1 mb-5">
        <div class="col-md-3 col-sm-12">
            <div class=" bg-white my-3 col-md-10 col-sm-6 col-12 rounded h-200px thumbnail_content">
                <div class="row">
                    <div class="col-12 rounded text-center h-200px " ng-hide="agency.Default">
                        <span class="fa fa-image fa-5x mt-5"></span>

                    </div>
                    <div class="cursor-pointer w-100 rounded h-200px" ng-show="agency.Default">
                        <div ng-if="agency.file.Type=='image'" id="img{{agency.file.Id}}" class="imgLiquidFill img-fluid pointer-event cat-image"
                             style="        height: 100% !important;
        background: url('/api/DocumentCategories/GetFileThumbnail/{{agency.file.FileId}}') no-repeat;
        background-size: 100% 100%;
        -webkit-transition: background-image 1s ease-in-out;
        transition: background-image 1s ease-in-out;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    ">
                        </div>
                        <div ng-if="agency.file.Type!='image'" class="preview filetype filetype_json" style="pointer-events: all;">
                            <span class="extention" style="pointer-events: all;"> <i class="fa fa-file"></i> {{agency.file.Extension}}</span>
                        </div>
                        <div ng-if="agency.file.LatestVersion" class="tags hide_in_colorlist" style=" position: absolute; right: 10px; top: 10px; color: #fff; font-size: 10px;">
                            <span class="bg-dark text-white" style="padding: 2px 4px; border-radius: 5px;">{{agency.file.LatestVersion}}</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 rounded text-center h-200px cursor-pointer thumbnail" ng-click="openProjectFileDialog1()">
                        <span class="fa fa-edit fa-4x mt-5"></span>
                        <h6>Select thumbnail</h6>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-sm-6 mt-3 col-12">
                <div class="col-12">

                    <span>{{agency.Agency.Name}}</span>
                </div>
                <hr />
                <div class="col-12 mt-4">

                    <span class="cursor-pointer avatar bg-light-gray fa fa-thumb-tack mt-1 " tooltip data-toggle="tooltip" data-placement="top" title="mark"></span>
                    <span class="cursor-pointer avatar fa fa-crop bg-light-gray mt-1" tooltip data-toggle="tooltip" data-placement="top" ng-click="crop(agency.Default)" title="Crop thumbnail"></span>

                    @*<span class="cursor-pointer avatar  fa fa-file-pdf-o bg-light-gray mt-1" data-toggle="tooltip" data-placement="top" title="PDF export" tooltip ng-click="downloadPdf()"></span>*@
                    <span class="cursor-pointer avatar bg-light-gray  fa fa-eye mt-1" data-toggle="tooltip" data-placement="top" title="Item seen by" tooltip></span>

                    @*<span class="cursor-pointer avatar  fa fa-file-pdf-o bg-light-gray mt-1" data-toggle="tooltip" data-placement="top" title="Download DOODs"></span>
                <span class="cursor-pointer avatar  fa fa-file-zip-o bg-light-gray mt-1" data-toggle="tooltip" data-placement="top" title="Download zip file" tooltip ng-click="dowloadZip()"></span>
                <span class="cursor-pointer avatar fa fa-code-fork bg-light-gray mt-1" data-toggle="tooltip" data-placement="top" title="Merge Character" tooltip ng-click="Merge()"></span>*@

                    <span class="cursor-pointer avatar fa fa-trash bg-light-gray mt-1" data-toggle="tooltip" data-placement="top" ng-click="showDel(agency.Agency.Id,'del')" title="Delete" tooltip></span>
                </div>
                <div class="col-12 bg-black rounded p-2 mt-3" ng-show="agency.Agency.Id+'del'==charIndex">
                    <p class="text-white"> Do you really want to delete the agency '{{agency.Agency.Name}}'</p>
                    <div class="flex-row d-flex">
                        <button class="btn btn-sm btn-primary m-1" ng-click="DeleteAgency(agency)">Yes</button>
                        <button class="btn btn-sm btn-primary m-1" ng-click="hideDel()">No</button>
                    </div>

                </div>
                <div class="col-12 mt-3">
                    <span>Access rights </span>
                    <button class="btn btn-light btn-sm "><i class="fa fa-edit"></i>Edit</button>
                </div>
                @*</div>*@

                <div class="col-12 mt-3">
                    <a href="#">
                        <img src="/api/UserProfiles/GetLoggedInUserThumbnail/140/140" tooltip data-toggle="tooltip" data-placement="top" title="{{userProfile.FirstName}}{{userProfile.LastName}}" class="avatar" />
                    </a>

                </div>
                <div class="col-12 mt-3">
                    <span>Readable by </span>
                </div>
                <div class="col-12 mt-3">
                    <span>No one can exclusively read. </span>
                </div>
            </div>
        </div>
        <div class="col-md-9 col-sm-12">
            <div class="row">
                <div class="col-md-12 general-info col-sm-12 py-2  cursor-pointer rounded bg-light-gray">

                    <span class="h5">General Information</span>
                    <i class="fa fa-chevron-up pull-right cursor-pointer "></i>
                </div>
                <div class="col-12 general-info-div my-2">
                    <div class="row" ng-hide="Editinfo">

                        <div class="col-md-12 col-sm-12 col-12 mt-3">
                            <button class="btn btn-light bg-light-gray" ng-click="show_Edit_info();">Edit general information <i class="fa fa-edit"></i></button>
                        </div>
                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="col-12">
                                <label>Name</label>
                                <h6>  {{agency.Agency.Name}}</h6>
                            </div>
                            <div class="col-12" ng-show=" agency.Agency.Street || agency.Agency.City_State || agency.Agency.PostalCode || agency.Agency.Country.name">
                                <label>Address</label>
                                <h6>  {{agency.Agency.Street}}</h6>
                                <h6>  {{agency.Agency.PostalCode}} {{agency.Agency.City_State}}</h6>
                                <h6>  {{agency.Agency.Country.name}}</h6>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="col-12" ng-show="agency.Agency.Email">
                                <label>Email</label>
                                <h6>  {{agency.Agency.Email}}</h6>
                            </div>
                            <div class="col-12" ng-show="agency.Agency.Website">
                                <label>Website</label>
                                <h6>  {{agency.Agency.Website}}</h6>
                            </div>
                            <div class="col-12" ng-show="agency.Agency.PhoneHome">
                                <label>Phone (home)</label>
                                <h6>  {{agency.Agency.PhoneHome}}</h6>
                            </div>
                            <div class="col-12" ng-show="agency.Agency.PhoneMobile">
                                <label>Phone (mobile)</label>
                                <h6>  {{agency.Agency.PhoneMobile}}</h6>
                            </div>
                            <div class="col-12" ng-show="agency.Agency.Fax">
                                <label>Fax</label>
                                <h6>  {{agency.Agency.Fax}}</h6>
                            </div>
                        </div>

                    </div>
                    <div class="row" ng-show="Editinfo">

                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="row">
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Name(required)</label>
                                        <input type="text" ng-model="agency.Agency.Name" required class="form-control" name="Name" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="row">
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Street</label>
                                        <input type="text" required ng-model="agency.Agency.Street" class="form-control" name="Street" />
                                    </div>
                                </div>
                                <div class=" col-lg-6 col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <label>
                                            City and State/Prov
                                        </label>
                                        <input type="text" ng-model="agency.Agency.City_State" class="form-control" name="City" />
                                    </div>
                                </div>
                                <div class=" col-lg-6 col-md-6 col-sm-12">
                                    <div class="form-group">
                                        <label>
                                            Postal code
                                        </label>
                                        <input type="text" ng-model="agency.Agency.PostalCode" class="form-control" name="PostalCode" />
                                    </div>
                                </div>

                                <div class="col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>
                                            Country
                                        </label>

                                        <ui-select ng-model="agency.Agency.Country" theme="selectize" ng-disabled="disabled">
                                            <ui-select-match>{{$select.selected.name}}</ui-select-match>
                                            <ui-select-choices repeat="country in countries | filter: $select.search">
                                                <span ng-bind-html="country.name | highlight: $select.search"></span>

                                            </ui-select-choices>
                                        </ui-select>

                                    </div>
                                </div>
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Email</label>
                                        <input type="email" ng-model="agency.Agency.Email" class="form-control" name="Email" />
                                    </div>
                                </div>
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Website</label>
                                        <input type="text" ng-model="agency.Agency.Website" class="form-control" name="website" />
                                    </div>
                                </div>
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Phone (home)</label>
                                        <input type="tel" ng-model="agency.Agency.PhoneHome" class="form-control" name="PhoneHome" />
                                    </div>
                                </div>
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Phone (mobile)</label>
                                        <input type="tel" ng-model="agency.Agency.PhoneMobile" class="form-control" name="PhoneMobile" />
                                    </div>
                                </div>
                                <div class=" col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Fax</label>
                                        <input type="tel" ng-model="agency.Agency.Fax" class="form-control" name="Fax" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 text-right">
                            <button class="btn btn-primary btn-sm" ng-click="UpdateAgency(agency)"> Done</button>
                        </div>
                    </div>

                </div>


            </div>
            <div class="row mt-1">
                <div class="col-md-12 images col-sm-12 py-2 cursor-pointer rounded bg-light-gray">

                    <span class="h5"> Images and Files({{agency.files.length}})  </span>
                    <i class="fa fa-chevron-up pull-right cursor-pointer "></i>
                </div>
                <div class="col-md-12 col-sm-12 col-12 my-1">

                    <div class="col-12 images-div my-3">
                        <div class="row clearfix">
                            <div class="col-sm-12">
                                <div class="progressFiles">

                                </div>
                                <div id="draggableContainer">
                                    <div id="uppy-uploader" class="w-100" ng-show="hasFilesinUppy">

                                    </div>
                                    <input type="file" multiple hidden id="projectFile" />
                                    <div class="row clearfix mb-3" ng-if="agency.files.length>0">
                                        <div class="col-sm-12">
                                            <button type="button" class="btn btn-success" data-toggle="collapse" ng-click="openProjectFileDialog()" data-target="#createFiles" aria-expanded="false" aria-controls="collapseExample">
                                                Add file <i class="fa fa-plus-circle"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row clearfix" ng-if="agency.files.length==0">
                                        <div class="col-sm-12">
                                            <div class="list-empty text-center d-block p-3 border-dashed">
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <span class="material-icons font-20">
                                                                    insert_drive_file
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-sm-12">
                                                                <span class="col-form-label">
                                                                    There are no files yet. You can drop files here.
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix">
                                                    <div class="col-sm-12 mt-3">
                                                        <button type="button" class="btn btn-success" data-toggle="collapse" data-target="#createLink" aria-expanded="false" ng-click="openProjectFileDialog()" aria-controls="collapseExample">Add file</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row clearfix">
                                        <div class="col-sm-6 col-md-4 col-lg-3 col-xxl-2 col-xxxl-2 mb-3" ng-repeat="file in agency.files" style="height:160px !important">
                                            <div class="row py-1 p-2 rounded bg-dark" style="height: 130px;" ng-show="file.Id+'file'==charIndex">
                                                <div class="row">
                                                    <div class="col-12 pl-4">
                                                        <p class="text-white font-12">
                                                            Do you really want to delete this file?
                                                        </p>
                                                    </div>
                                                    <div class="col-12 pl-4">
                                                        <button class="btn btn-sm btn-primary" ng-click="deleteFile($event,file)">Yes</button>
                                                        <button class="btn btn-sm btn-primary" ng-click="hideSplit();$event.stopPropagation();">No</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card box-shadow" ng-show="file.Id+'file'!=charIndex">

                                                <div class="cursor-pointer" ng-click="openFileViewer(file, agency.files)">
                                                    <div ng-if="file.Type=='image'" class="imgLiquidFill img-fluid pointer-event cat-image"
                                                         style="height: 130px;
                                                                                background-image: url('/api/UserProfiles/GetFileThumbnail/{{file.FileId}}/200/200');
                                                                                background-size: cover;
                                                                                background-repeat: no-repeat;
                                                                                -webkit-transition: background-image 1s ease-in-out;
                                                                                transition: background-image 1s ease-in-out;
                                                                                border-top-left-radius: 5px;
                                                                                border-top-right-radius: 5px; ">
                                                    </div>
                                                    <div ng-if="file.Type!='image'" class="preview filetype filetype_json" style="pointer-events: all;">
                                                        <span class="extention" style="pointer-events: all;"> <i class="fa fa-file"></i> {{file.Extension}}</span>
                                                    </div>
                                                    <div ng-if="file.LatestVersion" class="tags hide_in_colorlist" style=" position: absolute; right: 10px; top: 10px; color: #fff; font-size: 10px;">
                                                        <span class="bg-dark text-white" style="padding: 2px 4px; border-radius: 5px;">{{file.LatestVersion}}</span>
                                                    </div>
                                                </div>
                                                <div class="card-body p-1">

                                                    <div class="row clearfix">
                                                        <div class="col-10 text-nowrap overflow-ellipsis" title="{{file.Name}}">
                                                            {{file.Name}}
                                                        </div>
                                                        <div class="col-2 text-right">
                                                            <div class="item-action dropdown">
                                                                <a href="javascript:void(0)" data-toggle="dropdown" class="icon" aria-expanded="false">
                                                                    <i class="fe fe-more-vertical"></i>
                                                                </a>
                                                                <div class="dropdown-menu dropdown-menu-right" x-placement="top-end" style="position: absolute; transform: translate3d(-178px, -285px, 0px); top: 0px; left: 0px; will-change: transform;">
                                                                    <a href="javascript:void(0)" ng-click="showDel(file.Id,'file');$event.stopPropagation();" class="dropdown-item">
                                                                        <i class="fa fa-trash">
                                                                        </i> Delete
                                                                    </a>
                                                                    <a href="javascript:void(0)" ng-if="false" g-click="makeDefault($event,file)" class="dropdown-item">
                                                                        <i class="fa fa-file-picture-o">
                                                                        </i> Select Thumbnail
                                                                    </a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row clearfix" ng-if="agency.files.length>0">
                                        <div class="col-sm-12">
                                            <ul uib-pagination
                                                total-items="tabContentLength.filesCount"
                                                ng-model="filesPaging.page"
                                                items-per-page="12"
                                                previous-text="&lsaquo;"
                                                next-text="&rsaquo;"
                                                class="pull-right font-15"
                                                ng-change="getDocumentCatFiles()"
                                                boundary-link-numbers="true"
                                                rotate="false">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-12 contact-info col-sm-12 py-2  cursor-pointer rounded bg-light-gray">

                    <span class="h5">Contacts ({{agency.AgencyContact.length}})</span>
                    <i class="fa fa-chevron-up pull-right cursor-pointer "></i>
                </div>
                <div class="col-12 contact-info-div my-2">
                    <div class="row" ng-hide="EditContact || agency.AgencyContact.length==0">

                        <div class="col-md-12 col-sm-12 col-12 mt-3 py-1 p-2">
                            <button class="btn btn-light bg-light-gray" ng-click="show_contact_info();">Create Contact<i class="fa fa-edit"></i></button>
                        </div>
                        <div class="col-12 mt-1" ng-repeat="c in agency.AgencyContact | orderBy:'c.Id'">
                            <div class="row m-0 p-0">
                                <div class="col-12 py-1 p-2 rounded bg-dark" ng-show="c.Id+'ac'==charIndex">
                                    <div class="row">
                                        <div class="col-12 pl-4">
                                            <p class="font-12">
                                                Do you really want to delete this contact?
                                            </p>
                                        </div>
                                        <div class="col-12 pl-4">
                                            <button class="btn btn-sm btn-primary" ng-click="deleteAgencyContact(c.Id)">Yes</button>
                                            <button class="btn btn-sm btn-primary" ng-click="hideSplit();$event.stopPropagation();">No</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12 rounded bg-white py-1 p-2" ng-show="c.Id+'ac'!=charIndex">

                                    <div class="row ">
                                        <div class="col-10 text-truncate cursor-pointer">
                                            <div class="row">

                                                <div class="col-10">
                                                    <div class="row">
                                                        <div class="col-12" ng-show="c.Name">
                                                            <span>{{c.Name}}</span>

                                                        </div>

                                                        <div class="col-12" ng-show="c.Position">
                                                            {{c.Position}}
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-2  text-right my-auto dropleft">
                                            <span class=" cursor-pointer btn-transparent btn-sm " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></span>
                                            <div class="dropdown-menu">



                                                <a class="dropdown-item cursor-pointer" ng-click="showDel(c.Id,'ac')">Delete element</a>

                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row my-2" ng-show="EditContact">

                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Name</label>
                                        <input type="text" ng-model="_contact.Name" class="form-control" />
                                    </div>

                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Position</label>
                                        <input type="text" ng-model="_contact.Position" class="form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12 col-12">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Email</label>
                                        <input type="email" ng-model="_contact.Email" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Phone (home)</label>
                                        <input type="tel" ng-model="_contact.PhoneHome" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12">

                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Phone (mobile)</label>
                                        <input type="tel" ng-model="_contact.PhoneMobile" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12">

                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Phone (office)</label>
                                        <input type="tel" ng-model="_contact.PhoneOffice" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">

                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="form-group">
                                        <label>Fax</label>
                                        <input type="tel" ng-model="_contact.Fax" class="form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 text-right">
                            <button class="btn btn-sm btn-danger" ng-click="hideContact()">Cancel</button>
                            <button class="btn btn-primary btn-sm" ng-click="CreatContact(_contact)"> Create Contact</button>
                        </div>
                    </div>
                    <div class="row clearfix" ng-if="agency.AgencyContact.length==0">
                        <div class="col-sm-12">
                            <div class="list-empty text-center d-block p-3 border-dashed">
                                <div class="row clearfix">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <span class="fa fa-user fa-3x">

                                                </span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <span class="col-form-label">
                                                    There are no contacts entered yet.
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row clearfix">
                                    <div class="col-sm-12 mt-3">
                                        <button type="button" class="btn btn-success" data-toggle="collapse" data-target="#createLink" aria-expanded="false" ng-click="show_contact_info();" aria-controls="collapseExample">Creat Contact</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="row">
                <div class="col-md-12 actor-info col-sm-12 py-2  cursor-pointer rounded bg-light-gray">

                    <span class="h5">Actors/Talents</span>
                    <i class="fa fa-chevron-up pull-right cursor-pointer "></i>
                </div>
                <div class="col-12 actor-info-div">
                    <div class="row" ng-show="actors.length>0">
                        <div class="col-md-12 col-sm-12 col-12 mt-3 py-1 p-2">
                            <button class="btn btn-light bg-light-gray" ng-click="create_Talent();">Create Contact<i class="fa fa-edit"></i></button>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-3 col-xxl-3 col-xxxl-3 mb-3 m-2 " ng-repeat="a in actors" ng-init="$last && callback('callback')">
                            <div class=" col-12 h-160px rounded  bg-black" ng-show="a.Id+'a'==charIndex">
                                <p class="text-white">      Do you really want to delete this actor?</p>
                                <div class="flex-row d-flex">
                                    <button class="btn btn-sm btn-primary m-1" ng-click="DeleteActor(a)">Yes</button>
                                    <button class="btn btn-sm btn-primary m-1" ng-click="hideDel()">No</button>
                                </div>

                            </div>
                            <div class="row {{a.HasFile?'opacity-100':'opacity-60'}}" ng-show="a.Id+'a'!=charIndex">
                                <div class="card mb-2" style=" cursor: pointer !important;transition: background .2s linear,box-shadow .2s linear,opacity .8s linear .3s;">
                                    <div class="card-header p-1" ng-show="a.Id!=-1">
                                        <h3 style="text-transform: capitalize;" class="card-title  ml-1 mt-1 overflow-ellipsis">
                                            <div class="font-15  overflow-ellipsis d-block" ng-model="a.Name" title="{{a.Name}}" data-toggle="tooltip" data-placement="top" tooltip>{{a.Name}}</div>

                                            <small>Contains {{a.FileCount}} files</small>
                                        </h3>
                                        <div class="card-options">
                                            <div class="item-action dropdown ml-2">
                                                <a href="javascript:void(0)" data-toggle="dropdown" class="ignore-click">
                                                    <i class="fe fe-more-vertical ignore-click"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right">
                                                    <a href="javascript:void(0)" class="dropdown-item ignore-click" ng-click="ShowDel(a.Id,'a')"><i class="dropdown-icon fa fa-trash"></i> Delete</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    \
                                    <div class="card-body card-body p-0">
                                        <div ng-if="a.HasFile" class="imgLiquidFill" style="        height: 200px !important;
        background: url('/api/UserProfiles/GetFileThumbnail/{{a.file.FileId}}/100/100') no-repeat;
        background-size: cover;
">
                                            <div ng-if="a.file.Type!='image'" class="preview filetype filetype_json ng-scope" style="pointer-events: all;height: 200px !important;">
                                                <span class="extention ng-binding" style="pointer-events: all;"> <i class="fa fa-file"></i>{{a.file.Extension}}</span>
                                            </div>
                                            <div id="img{{a.file.Id}}" ng-if="a.FileType=='image'" class="imgLiquidFill img-fluid pointer-event cat-image"
                                                 style="        height: 200px;
        background: url('/api/DocumentCategories/GetFileThumbnail/{{a.FileId}}/200/200') no-repeat 50% 50%;
        -webkit-transition: background-image 1s ease-in-out;
        transition: background-image 1s ease-in-out;
        border-bottom-left-radius: 0px;
        border-bottom-right-radius: 0px;">
                                            </div>
                                        </div>
                                        <div ng-if="!a.HasFile" style="        height: 200px !important">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row clearfix" ng-if="actors.length==0">
                        <div class="col-sm-12">
                            <div class="list-empty text-center d-block p-3 border-dashed">
                                <div class="row clearfix">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <span><img class="icon-svg icon_svg ml-2 ng-scope" src="/icons/CAST.svg"></span>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <span class="col-form-label">
                                                    <p>There are no actors.</p>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row clearfix">
                                    <div class="col-sm-12 mt-3">
                                        <button type="button" class="btn btn-success" data-toggle="collapse" data-target="#createLink" aria-expanded="false" ng-click="create_Talent(agency.Agency);" aria-controls="collapseExample">Creat Actor</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col-md-12 tasks col-sm-12 py-2  cursor-pointer rounded bg-light-gray">

                    <span class="h5">My created tasks ({{mytasks.length}})</span>
                    <i class="fa fa-chevron-up pull-right cursor-pointer "></i>
                </div>
                <div class="col-12 tasks-info-div my-3">
                    <div class="row clearfix">
                        <div class="col-12">
                            <div class="row clearfix mb-3" ng-if="mytasks.length>0">
                                <div class="col-sm-12">
                                    <button type="button" class="btn btn-success" data-toggle="collapse" data-target="#newTask" aria-expanded="false" aria-controls="collapseExample">
                                        Create task <i class="fa fa-plus-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="row clearfix collapse mb-3" id="newTask">
                                <div class="col-sm-12">
                                    <div class="card card-body p-3">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <h5>
                                                    <span class="col-form-label">Create task</span>
                                                </h5>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-sm-12">
                                                <h6>
                                                    <small>To create a new task, enter a title. Then, choose specific crew members to assign the task to. Optionally, you can add a deadline to the task.</small>
                                                </h6>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 col-sm-12">
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="form-label">Title</label>
                                                            <input maxlength="200" type="text" class="form-control"
                                                                   placeholder="Title" ng-model="taskObj.Title" />
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="form-label">Description</label>
                                                            <textarea class="form-control" rows="5" ng-model="taskObj.Description"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="form-label">
                                                                Assigned crew members
                                                            </label>
                                                            <ui-select multiple class="form-control" ng-model="taskObj.AssignedTo" theme="selectize" sortable="true" close-on-select="false">
                                                                <ui-select-match>{{$item.name}}</ui-select-match>
                                                                <ui-select-choices group-by="groupUsers" repeat="visible as visible in projectUsersAndGroups">
                                                                    <div class="row p-10 clearfix">
                                                                        <div class="col-sm-1">
                                                                            <img class="rounded imgLiquidFill img-fluid" src="{{visible.avatar}}" alt="" />
                                                                        </div>
                                                                        <div class="col-sm-11">
                                                                            <div ng-bind-html="visible.name | highlight: $select.search">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="row clearfix mt-4">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="custom-switch">
                                                                <input type="checkbox" ng-model="taskObj.HasDeadline" id="toggleCalendarDeadline"
                                                                       data-toggle="collapse" data-target="#deadline-calendar" aria-expanded="false" aria-controls="collapseExample"
                                                                       name="custom-switch-checkbox" class="custom-switch-input">
                                                                <span class="custom-switch-indicator"></span>
                                                                <span class="custom-switch-description">Task has a deadline</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix mt-2">
                                                    <div class="col-sm-12 collapse" id="deadline-calendar" data-parent="#newTask">
                                                        <div class="form-group">
                                                            <label class="form-label">Deadline</label>
                                                            <div class="input-group">
                                                                <input type="date" ng-model="taskObj.Deadline" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row clearfix mt-4">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <label class="custom-switch">
                                                                <input type="checkbox" ng-model="taskObj.HasSection" id="toggleSectionSelector"
                                                                       data-toggle="collapse" data-target="#section-selector" aria-expanded="false" aria-controls="collapseExample"
                                                                       name="custom-switch-checkbox" class="custom-switch-input">
                                                                <span class="custom-switch-indicator"></span>
                                                                <span class="custom-switch-description">Task is linked to a section</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix mt-2">
                                                    <div class="col-sm-12 collapse" id="section-selector">
                                                        <div class="form-group">
                                                            <label class="form-label">Section</label>
                                                            <div class="input-group">
                                                                <select chosen
                                                                        class="form-control"
                                                                        option="sections"
                                                                        ng-model="taskObj.Section"
                                                                        ng-options="section.Url as section.Name for section in sections">
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row clearfix mt-2" ng-if="taskObj.Section=='documents'">
                                                    <div class="col-sm-12" id="object-selector">
                                                        <div class="form-group">
                                                            <label class="form-label">Object</label>
                                                            <div class="input-group">
                                                                <select chosen
                                                                        class="form-control"
                                                                        option="objects"
                                                                        ng-model="taskObj.DocumentCategoryId"
                                                                        ng-options="object.Id as object.Name for object in objects">
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12 text-right ">
                                                <div class="d-inline-block">
                                                    <button type="button" class="btn btn-primary d-flex float-right" ng-click="createTask()" data-toggle="collapse" data-target="#newTask" aria-expanded="false" aria-controls="collapseExample">Create</button>
                                                    <button type="button" class="btn btn-default d-flex" ng-click="cancelTaskCreation()" data-toggle="collapse" data-target="#newTask" aria-expanded="false" aria-controls="collapseExample">Cancel</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center py-5 border-dashed" ng-if="mytasks.length==0">
                                <span class="fa fa-2x fa-edit"></span>
                                <p>There are no tasks available.</p>
                                <button type="button" class="btn btn-success mt-3" data-toggle="collapse" data-target="#newTask" aria-expanded="false" aria-controls="newTask">
                                    Create Task <i class="fa fa-plus-circle"></i>
                                </button>
                            </div>
                            <div class="row clearfix" ng-if="mytasks.length>0">
                                <div class="col-sm-12">
                                    <div style="height:71px !important" class="card task box-shadow mb-2 {{task.ClassName}}" ng-repeat="task in mytasks" ng-click="$event.originalEvent.dropdown || goToTaskProfile(task.Id)">
                                        <div class="row py-1 p-2 rounded bg-dark" ng-show="task.Id+'task'==charIndex">
                                            <div class="row">
                                                <div class="col-12 pl-4">
                                                    <p class="text-white font-12">
                                                        Do you really want to delete this task?
                                                    </p>
                                                </div>
                                                <div class="col-12 pl-4">
                                                    <button class="btn btn-sm btn-primary" confirmed-click="deleteTask($event, task)" ng-confirm-title="Delete Task?" ng-confirm-click="Would you like to delete this task? This cannot be undone!">Yes</button>
                                                    <button class="btn btn-sm btn-primary" ng-click="hideSplit();$event.stopPropagation();">No</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row clearfix p-0 ml-3" ng-show="task.Id+'task'!=charIndex">
                                            <div class="col-1 mt-3 p-0 tasks_status_symbol">
                                                <a class="symbol" href="javascript:void(0)" ng-click="changeTaskStatus($event,task)" data-toggle="tooltip" data-placement="top" tooltip title="{{task.ClassName=='completed' ? 'Mark task as in progress again' : task.ClassName == 'overdue' || task.ClassName == 'pending' ? 'Mark task as completed' : ''}}">
                                                    <i class="{{task.Completed?'fa fa-check-circle':'fa fa-circle-thin'}}"></i>
                                                </a>
                                            </div>
                                            <div class="col-4 mt-3 text-left">
                                                {{task.Title}}
                                                <p ng-if="task.SubTasks.length>0">
                                                    <small>{{(task.SubTasks | filter:{Completed:true}).length}} of {{task.SubTasks.length}} subtasks have been completed</small>
                                                </p>
                                            </div>
                                            <div class="col-2">
                                                <div ng-if="task.HasDeadline">
                                                    <small class="mb-1">Deadline</small>
                                                    <br />
                                                    {{task.Deadline}}
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <small class="mb-1">Assigned to</small>
                                                <br />
                                                <ul class="list-unstyled team-info sm margin-0 overflow-hidden text-nowrap">
                                                    <li ng-repeat="assignedTo in task.AssignedTo" data-toggle="tooltip" data-placement="top" tooltip title="{{assignedTo.name}}">
                                                        <img ng-if="assignedTo.Type=='user'" src="/api/UserProfiles/GetUserPhoto/{{assignedTo.id}}/30/30" alt="Avatar">
                                                        <img ng-if="assignedTo.Type!='user'" height="32" src="{{assignedTo.icon}}" alt="Avatar">
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="col-1 p-0">
                                                <small class="mb-1">Status</small>
                                                <br />
                                                <div class="p-0 font-weight-bold">{{task.ClassName}}</div>
                                            </div>
                                            <div class="col-1 text-right">
                                                <div class="item-action dropdown mt-3">
                                                    <a href="javascript:void(0)" data-toggle="dropdown" ng-click="$event.originalEvent.dropdown = true" class="icon font-20" aria-expanded="false">
                                                        <i class="fe fe-more-vertical"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-right" x-placement="top-end" style="position: absolute; transform: translate3d(-178px, -285px, 0px); top: 0px; left: 0px; will-change: transform;">
                                                        <a href="javascript:void(0)" ng-click="showDel(task.Id,'task');$event.stopPropagation();" class="dropdown-item">
                                                            <i class="dropdown-icon fa fa-trash"></i> Delete
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>

<script>
    $(document).ready(function () {

        setTimeout(function () {
            if ($('body').hasClass("dark-mode")) {

                $('.add').addClass('bg-dark');
                $('.add').removeClass('border-dashed');



            } else {

                $('.add').addClass('border-dashed');
                $('.add').removeClass('bg-dark');
                $('.add').removeClass('bg-white');
            }
        }, 400);
        $('body').change(function () {
            if ($('body').hasClass("dark-mode")) {

                $('.add').addClass('bg-dark');
                $('.add').removeClass('border-dashed');



            } else {

                $('.add').addClass('border-dashed');
                $('.add').removeClass('bg-dark');
                $('.add').removeClass('bg-white');
            }
        });
        $('.general-info').click(function () {
            if ($('.general-info>i').hasClass('fa-chevron-down')) {
                $('.general-info-div').fadeIn('slow');
                $('.general-info>i').removeClass('fa-chevron-down');
                $('.general-info>i').addClass('fa-chevron-up');
            } else {
                $('.general-info-div').fadeOut('slow');
                $('.general-info>i').removeClass('fa-chevron-up');
                $('.general-info>i').addClass('fa-chevron-down');
            }
        });
        $('.contact-info').click(function () {
            if ($('.contact-info>i').hasClass('fa-chevron-down')) {
                $('.contact-info-div').fadeIn('slow');
                $('.contact-info>i').removeClass('fa-chevron-down');
                $('.contact-info>i').addClass('fa-chevron-up');
            } else {
                $('.contact-info-div').fadeOut('slow');
                $('.contact-info>i').removeClass('fa-chevron-up');
                $('.contact-info>i').addClass('fa-chevron-down');
            }
        });
        $('.images').click(function () {
            if ($('.images>i').hasClass('fa-chevron-down')) {
                $('.images-div').fadeIn('slow');
                $('.images>i').removeClass('fa-chevron-down');
                $('.images>i').addClass('fa-chevron-up');
            } else {
                $('.images-div').fadeOut('slow');
                $('.images>i').removeClass('fa-chevron-up');
                $('.images>i').addClass('fa-chevron-down');
            }
        });
        $('.actor').click(function () {
            if ($('.actor>i').hasClass('fa-chevron-down')) {
                $('.actor-info-div').fadeIn('slow');
                $('.actor>i').removeClass('fa-chevron-down');
                $('.actor>i').addClass('fa-chevron-up');
            } else {
                $('.actor-info-div').fadeOut('slow');
                $('.actor>i').removeClass('fa-chevron-up');
                $('.actor>i').addClass('fa-chevron-down');
            }
        });
        $('.tasks').click(function () {
            if ($('.tasks>i').hasClass('fa-chevron-down')) {
                $('.tasks-info-div').fadeIn('slow');
                $('.tasks>i').removeClass('fa-chevron-down');
                $('.tasks>i').addClass('fa-chevron-up');
            } else {
                $('.tasks-info-div').fadeOut('slow');
                $('.tasks>i').removeClass('fa-chevron-up');
                $('.tasks>i').addClass('fa-chevron-down');
            }
        });
    });
</script>