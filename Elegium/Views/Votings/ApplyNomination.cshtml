<div class="section-body" style="max-width:1300px" ui-view=""
     ng-controller="ApplyNominationCtrl">
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <i class="fa fa-filter fa-2x py-2 pr-3 border-right"></i>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item dropdown border-right">
                        <a class="nav-link dropdown-toggle" href="javascript:void(0)" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-times-circle pr-1 text-red"
                               ng-click="$event.stopPropagation();searchQuery.ProductionTypeId = null;getNominations()"
                               ng-if="searchQuery.ProductionTypeId"></i>
                            Production type
                        </a>
                        <div class="dropdown-menu" style="min-width: 70vw" aria-labelledby="navbarDropdown">
                            <div class="selectgroup selectgroup-pills p-2">
                                <label class="selectgroup-item" ng-repeat="item in productionTypes">
                                    <input type="radio" name="production-filter" value="item.Id"
                                           class="selectgroup-input" ng-click="productionClicked(item.Id)"
                                           ng-checked="searchQuery.ProductionTypeId == item.Id">
                                    <span class="selectgroup-button selectgroup-button-icon">{{item.Name}}</span>
                                </label>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item dropdown border-right">
                        <a class="nav-link dropdown-toggle" href="javascript:void(0)" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-times-circle pr-1 text-red"
                               ng-click="$event.stopPropagation();searchQuery.CountryId = null;getNominations()"
                               ng-if="searchQuery.CountryId"></i>
                            Country
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <div class="selectgroup selectgroup-pills p-2">
                                <label class="selectgroup-item" ng-repeat="item in countries">
                                    <input type="radio" name="country-filter" value="item.Id"
                                           class="selectgroup-input" ng-click="countryClicked(item.Id)"
                                           ng-checked="searchQuery.CountryId == item.Id">
                                    <span class="selectgroup-button selectgroup-button-icon">{{item.Name}}</span>
                                </label>
                            </div>
                        </div>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <button class="btn btn-outline-secondary my-2 my-sm-0" type="button" ng-click="clearFilters()"><i class="fa fa-undo"></i> Clear Filters</button>
                </form>
            </div>
        </nav>

        <div class="row mt-3" ng-if="!isLoading">
            <div class="col-sm-12 col-md-6"
                 ng-repeat="nomination in nominations">
                <div class="card" style="height:95%">
                    <div class="card-body">
                        <p>
                            <span class="badge badge-primary">{{nomination.ProductionType.Name}}</span>
                        </p>
                        <h6>
                            {{nomination.Name}} <small class="float-right">Due <time am-time-ago="nomination.EndDate"></time></small>
                        </h6>
                        <p>
                            {{nomination.Description | limitTo:200 }}{{ nomination.Description.length > 200 ? '...' : ''}}
                        </p>
                        <p ng-if="nomination.TermsAndConditions">
                            <b>Terms & Conditions:</b>
                            <span>
                                {{nomination.TermsAndConditions | limitTo:200 }}{{ nomination.TermsAndConditions.length > 200 ? '...' : ''}}
                            </span>
                        </p>
                        <p>
                            <b>
                                Price:
                            </b>
                            <span>{{nomination.Price}} {{nomination.Currency.Name}}</span>
                        </p>
                        <p class="text-right">
                            <i class="fa fa-map-marker"></i>
                            <span ng-if="nomination.Country"> {{nomination.Country.Name}}</span>
                            <span ng-if="!nomination.Country"> Over the globe</span>
                        </p>
                        <div style="position:absolute; bottom:10px">
                            <div class="row">
                                <button class="btn btn-primary" ng-click="openApplyFor(nomination)">
                                    <i class="fa fa-pencil"></i> Apply
                                </button>
                                <button class="btn btn-info ml-2" ng-click="openView(nomination)">
                                    <i class="fa fa-eye"></i> View Detail
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" ng-if="nominationsNotFound">
            <div class="col-12 text-center">
                <img class="icon-svg mb-3" style="width:50px;" src="/menu-icons/VOTEFUNDING.svg">
                <h4>There are no nominations right now</h4>
            </div>
        </div>

        <div class="row mt-5" ng-if="isLoading">
            <div class="col-12 text-center">
                <i class="fa fa-circle-o-notch fa-2x fa-spin"></i>
                <p>Loading...Please wait</p>
            </div>
        </div>
    </div>
</div>
