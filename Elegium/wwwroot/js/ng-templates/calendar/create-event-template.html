<style>
    .pac-container {
        z-index: 10000 !important;
    }

    .thumbnail_overlay {
        width: 100%;
        height: 100%;
        position: absolute;
        text-align: center;
        background-color: rgba(0,0,0,.6);
        color: #fff;
        transition: opacity linear .5s;
        opacity: 0;
        font-size: 15px;
        font-family: 'Work Sans',sans-serif;
        font-weight: 400;
        border-radius: 5px;
        cursor: pointer;
        line-height: 220px;
        display: block;
    }

    .cat-image:hover .thumbnail_overlay {
        opacity: 1;
    }



    textarea:focus .comment_info {
        display: block !important;
    }

    textarea:focus {
        border: 1px #0d96ce solid !important;
    }



    textarea {
        height: 160px !important;
        background: none;
        border: 0;
        border: 1px #888 solid;
        color: #363636;
        padding: 5px 10px;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        -moz-transition: border .3s linear;
        -o-transition: border .3s linear;
        -webkit-transition: border .3s linear;
        transition: border .3s linear;
        font-size: 12px;
        font-family: Verdana,Geneva,'DejaVu Sans',sans-serif;
        border-radius: 5px;
    }

    .project-hover-files {
        visibility: hidden;
        display: flex;
    }

        .project-hover-files::before {
            visibility: visible;
            font-size: 20px;
            position: absolute !important;
            opacity: 1 !important;
            border: 3px dashed #0c0;
            height: 100%;
            width: 100%;
            display: inline-block;
            content: "";
        }

        .project-hover-files::after {
            content: "Drop your files here!";
            position: absolute !important;
            height: 20px;
            visibility: visible;
            top: 70%;
            margin-left: 42%;
        }

    .filetype {
        pointer-events: none;
        width: 100% !important;
        height: 130px;
        display: block;
        /* position: absolute; */
        top: 0;
        left: 0;
        background: #272727;
        color: #fff;
        text-align: center;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

        .filetype.preview .extention {
            font-size: 35px;
            line-height: 130px;
        }

        .filetype .extention {
            pointer-events: all;
            font-family: 'Work Sans',sans-serif;
            font-weight: 400;
            text-transform: uppercase;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 90%;
            display: inline-block;
            line-height: 55px;
            font-size: 15px;
        }

    /*#uppy-uploader {
        font-size: 12px;
        display: none;
        width: 300px !important;
        right: 60px;
        bottom: 20px;
        border-radius: 10px;
        padding: 10px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0,0,0,.5);
        background: #272727 !important;
        z-index: 1;
        display: block;
        position: fixed;
    }*/

</style>

<div id="demo" class="carousel slide" data-interval="false" data-ride="carousel" data-pause="hover">


    <div class="carousel-inner">


        <div class="carousel-item active">
            <div class="modal-header border-0">

                <h4 class="modal-title" id="modal-title">

                    {{title}}
                    <!--<br />
                    <p class="small">
                        To begin, give your event a title. Then choose groups or specific crew members as participants of the event and make the event visible to others if necessary. If you want to offer the participants different date and time options, choose 'Suggest several dates'.
                    </p>-->
                </h4>
                <div class="modal-footer border-0">
                    <button class="btn btn-secondary pull-right" ng-disabled="!EventForm.$valid"
                            ng-click="createEvent()">
                        <i class="fa fa-save"></i> Save
                    </button>
                    <button class="btn btn-danger" ng-click="cancel()">
                        <i class="fa fa-times"></i> Close
                    </button>
                </div>

            </div>

            <div class="modal-body p-2" id="modal-body">
                <div class="container-fluid">
                    <div class="container p-0">

                        <div class="stepwizard" ng-hide="true">
                            <div class="stepwizard-row setup-panel">
                                <div class="stepwizard-step col-xs-3">

                                    <a href="#step-1" type="button" class="btn btn-default btn-circle btn-success"><i class="fa fa-info-circle"></i></a>
                                    <p><small>General Information</small></p>
                                </div>

                            </div>
                        </div>

                        <div class="panel panel-primary setup-content" id="step-1">
                            <div class="panel-heading">
                                <h5 class="panel-title">
                                    General Information
                                </h5>
                            </div>

                            <div class="panel-body">
                                <div class="row clearfix">
                                    <div class="col-sm-12">


                                        <div class="card">
                                            <div class="card-body">


                                                <div class="row">
                                                    <div class="col-12">
                                                        <form role="form" name="EventForm" class="row">

                                                            <div class="row w-100" id="requestForm">
                                                                <div class="col-md-4 col-sm-12">
                                                                    <div class="form-group">
                                                                        <label class="form-label">Start Date <small>(required)</small></label>
                                                                        <input type="date" name="StartDate" class=" form-control {{EventForm.StartDate.$valid?'is-valid':'is-invalid'}}"
                                                                               ng-model="event.StartDate" required />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2 col-sm-12" ng-if="showTime">
                                                                    <div class="form-group">
                                                                        <label class="form-label">Start Time</label>
                                                                        <input type="text" class="time start form-control" ng-model="event.StartTime" xp-timepicker />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4 col-sm-12">
                                                                    <div class="form-group">
                                                                        <label class="form-label">End Date <small>(required)</small></label>
                                                                        <input type="date" name="EndDate" class=" form-control {{EventForm.EndDate.$valid?'is-valid':'is-invalid'}}"
                                                                               ng-model="event.EndDate" required />
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-2 col-sm-12" ng-if="showTime">
                                                                    <div class="form-group">
                                                                        <label class="form-label">End Time</label>
                                                                        <input type="text" class="time end form-control" ng-model="event.EndTime" xp-timepicker />
                                                                    </div>
                                                                </div>


                                                            </div>

                                                            <div class="col-12 mb-3">
                                                                <button class="btn btn-secondary" role="button" ng-click="showTime = !showTime">
                                                                    <i class="fa fa-clock-o"></i> <span ng-if="!showTime">Add time</span><span ng-if="showTime">Remove time</span>
                                                                </button>
                                                            </div>

                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <label class="form-label">Title <small>(required)</small></label>
                                                                    <input maxlength="200" required name="Title" class="form-control {{EventForm.Title.$valid?'is-valid':'is-invalid'}}"
                                                                           ng-model="event.Title" />
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="form-label">
                                                                        Description <small>(required)</small>
                                                                    </label>
                                                                    <textarea rows="5" name="Description" required class="form-control {{EventForm.Description.$valid?'is-valid':'is-invalid'}}" ng-model="event.Description"></textarea>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 col-sm-12" ng-if="showProjectSelect">
                                                                <div class="form-group">
                                                                    <label class="form-label">
                                                                        Project <small>(required)</small>
                                                                    </label>
                                                                    <select class="form-control custom-select" ng-change="projectChanged()"
                                                                            ng-options="item.Project.Id as item.Project.Name for item in projects" 
                                                                            ng-model="event.ProjectId">
                                                                    </select>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 col-sm-12" ng-hide="showProjectSelect && !event.ProjectId">
                                                                <div class="form-group">
                                                                    <label class="form-label">
                                                                        Participants
                                                                    </label>
                                                                    <ui-select multiple class="form-control" ng-model="event.AssignedTo" theme="selectize" sortable="true" close-on-select="false">
                                                                        <ui-select-match>{{$item.name}}</ui-select-match>
                                                                        <ui-select-choices group-by="groupUsers" repeat="visible as visible in projectUsersAndGroups">
                                                                            <div class="row p-10 clearfix">
                                                                                <div class="col-sm-1">
                                                                                    <img class="rounded img-fluid" src="{{visible.avatar}}" alt="" />
                                                                                </div>
                                                                                <div class="col-sm-11">
                                                                                    <div ng-bind-html="visible.name | highlight: $select.search">
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                    <div class="col-md-12 col-sm-12">
                                                        <label class="form-label">Do you want to add more?</label>
                                                        <div class="row">
                                                            <div class="col-lg-3 col-md-4 m-2 col-sm-5 col-12">
                                                                <button class="text-center cursor-pointer btn btn-dark btn-lg h-100 add-char py-5 w-100" 
                                                                        ng-disabled="showProjectSelect && !event.ProjectId" href="#">
                                                                    <i class="fa fa-map-marker text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-2x" ng-show="event.Location"></i>
                                                                    <p>Add location</p>

                                                                </button>
                                                            </div>

                                                            <div class="col-lg-3 col-md-4 m-2 col-sm-5  col-12">
                                                                <button class="text-center cursor-pointer add-extra btn btn-dark btn-lg py-5 h-100 w-100" 
                                                                        ng-disabled="showProjectSelect && !event.ProjectId" href="#">
                                                                    <i class="fa  fa-tag text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-2x" ng-show="event.CalenderCategoryId"></i>
                                                                    <p>Add category</p>
                                                                </button>
                                                            </div>
                                                            <div class="col-lg-3 col-md-4 m-2 col-sm-5  col-12">
                                                                <button class="text-center cursor-pointer shooting-info btn btn-dark btn-lg py-5 h-100 w-100"
                                                                        ng-disabled="showProjectSelect && !event.ProjectId" href="#">
                                                                    <i class="fa fa-paint-brush text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-2x" ng-show="event.Color"></i>
                                                                    <p>Add color</p>
                                                                </button>
                                                            </div>


                                                            <div class="col-lg-3 col-md-4 m-2 col-sm-5  col-12">
                                                                <button class="text-center cursor-pointer edit-visibility btn btn-dark btn-lg py-5 h-100 w-100" 
                                                                        ng-disabled="showProjectSelect && !event.ProjectId" href="#">
                                                                    <i class="fa fa-eye text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-2x" ng-show="event.AdditionalViewers"></i>
                                                                    <p>Edit visability</p>
                                                                </button>
                                                            </div>

                                                            <!--<div class="col-lg-3 col-md-4 m-2 col-sm-5  col-12">
                                                                <button class="text-center cursor-pointer shooting-info btn btn-dark btn-lg py-5 h-100 w-100" href="#">
                                                                    <i class="fa fa-calendar text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-3x" ng-hide="ShootingInfo.length<='0'"></i>
                                                                    <p>Suggest several dates</p>
                                                                </button>
                                                            </div>-->

                                                            <div class="col-lg-3 col-md-4 m-2 col-sm-5  col-12">
                                                                <button class="text-center cursor-pointer add-img btn btn-dark btn-lg py-5 h-100 w-100" 
                                                                        ng-disabled="showProjectSelect && !event.ProjectId" href="#">
                                                                    <i class="fa fa-file text-white fa-3x"></i>
                                                                    <i class="fa fa-check text-success fa-2x" ng-show="uppy.getFiles().length > 0 || files.length>0"></i>
                                                                    <p>
                                                                        Add images and files
                                                                    </p>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer border-0">
                <button class="btn btn-secondary pull-right" ng-disabled="!EventForm.$valid"
                        ng-click="createEvent()">
                    <i class="fa fa-save"></i> Save
                </button>
                <button class="btn btn-danger" ng-click="cancel()">
                    <i class="fa fa-times"></i> Close
                </button>
            </div>
        </div>
        <div class="carousel-item">
            <div class="modal-header">

                <h3 class="modal-title" id="modal-title">
                    <button class="btn btn-sm btn-dark btn-back "><i class="fa fa-arrow-left"></i></button>
                    Add location

                </h3>

            </div>
            <div class="modal-body" id="modal-body">

                <div class="container-fluid">
                    <h6>Here you can add a location for the event.</h6>
                    <div class="col-12 rounded my-1 bg-black srch" ng-hide="char_to_add">
                        <div class="row clearfix mt-4">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label class="form-label">Location</label>
                                    <input type="text" ng-model="event.Location" class="form-control form-control-sm" googleplace />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 py-5 text-right">
                        <button class="btn btn-primary btn-sm text-right btn-back">Done</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="carousel-item">
            <div class="modal-header">

                <h3 class="modal-title" id="modal-title">
                    <button class="btn btn-sm btn-dark btn-back "><i class="fa fa-arrow-left"></i></button>
                    Add category
                </h3>

            </div>
            <div class="modal-body" id="modal-body">

                <div class="container-fluid">
                    <h6>Here you can add a category to your event.</h6>

                    <div class="col-12 py-5">

                        <div class="selectgroup selectgroup-pills">
                            <label class="selectgroup-item" ng-repeat="item in categories">
                                <input type="radio" name="icon-input" value="item.Id"
                                       class="selectgroup-input" ng-click="selectCategory(item.Id)"
                                       ng-checked="event.CalenderCategoryId == item.Id">
                                <span class="selectgroup-button selectgroup-button-icon"
                                      style="border: 1px solid {{item.Color}}">{{item.Name}}</span>
                            </label>
                        </div>


                    </div>


                    <div class="col-12 py-5 text-right">
                        <button class="btn btn-primary btn-sm btn-back text-right">Done</button>
                    </div>
                </div>

            </div>
        </div>

        <div class="carousel-item">
            <div class="modal-header">

                <h3 class="modal-title" id="modal-title">
                    <button class="btn btn-sm btn-dark btn-back "><i class="fa fa-arrow-left"></i></button>
                    Add Color

                </h3>

            </div>
            <div class="modal-body" id="modal-body">

                <div class="container-fluid">
                    <h6>Here you can select a color.</h6>
                    <div class="panel-body">
                        <div class="row clearfix">
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-body">
                                        <form name="color" id="color">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label">Color</label>
                                                        <color-picker ng-model="event.Color" options="options" class="form-control"></color-picker>

                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                        <div class="col-12 py-5 text-right">

                                            <button class="btn btn-primary btn-sm text-right btn-back">Done</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="carousel-item">
            <div class="modal-header">

                <h3 class="modal-title" id="modal-title">
                    <button class="btn btn-sm btn-dark btn-back "><i class="fa fa-arrow-left"></i></button>
                    Add images and files

                </h3>

            </div>
            <div class="modal-body" id="modal-body">

                <div class="container-fluid">
                    <h6>Here you can add images and files.</h6>
                    <div class="panel-body">
                        <div class="row clearfix">
                            <div class="col-sm-12">


                                <div class="card">
                                    <div class="card-body">

                                        <div class="tab-pane fade show active" id="images-files">
                                            <div class="row clearfix">
                                                <div class="col-sm-12">
                                                    <div class="progressFiles">

                                                    </div>
                                                    <div>
                                                        <div id="uppy-uploader" class="w-100">

                                                        </div>
                                                        <!--<input type="file" multiple hidden id="projectFile" />
                                                        <div class="row clearfix mb-3" ng-if="files.length>0">
                                                            <div class="col-sm-12">
                                                                <button type="button" class="btn btn-success" data-toggle="collapse" ng-click="openProjectFileDialog()" data-target="#createFiles" aria-expanded="false" aria-controls="collapseExample">
                                                                    Add file <i class="fa fa-plus-circle"></i>
                                                                </button>
                                                            </div>
                                                        </div>-->
                                                        <!--<div class="row clearfix" ng-if="files.length==0">
                                                            <div class="col-sm-12">
                                                                <div class="list-empty text-center d-block p-3" style="border: 3px dashed #ccc;">
                                                                    <div class="row clearfix">
                                                                        <div class="col-sm-12">
                                                                            <div class="row">
                                                                                <div class="col-sm-12">
                                                                                    <span class="material-icons font-20">
                                                                                        insert_drive_file
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-sm-12">
                                                                                    <span class="col-form-label">
                                                                                        There are no files yet. You can drop files here.
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="row clearfix">
                                                                        <div class="col-sm-12 mt-3">
                                                                            <button type="button" class="btn btn-success" data-toggle="collapse" data-target="#createLink" aria-expanded="false" ng-click="openProjectFileDialog()" aria-controls="collapseExample">Add file</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>-->
                                                        <div class="row mt-5 clearfix">
                                                            <div class="col-sm-6 col-md-4 col-lg-3 col-xxl-2 col-xxxl-2 mb-3" ng-repeat="file in files" style="height:160px !important">
                                                                <div class="card box-shadow">
                                                                    <div class="cursor-pointer" ng-click="openProjectFileViewer(file)">
                                                                        <div ng-if="file.Type=='image'" class="img-fluid pointer-event cat-image"
                                                                             style="height: 130px;
                                                                                background-image: url('/api/UserProfiles/GetFileThumbnail/{{file.FileId}}/200/200');
                                                                                background-size: cover;
                                                                                background-repeat: no-repeat;
                                                                                -webkit-transition: background-image 1s ease-in-out;
                                                                                transition: background-image 1s ease-in-out;
                                                                                border-top-left-radius: 5px;
                                                                                border-top-right-radius: 5px; ">
                                                                        </div>
                                                                        <div ng-if="file.Type!='image'" class="preview filetype filetype_json" style="pointer-events: all;">
                                                                            <span class="extention" style="pointer-events: all;"> <i class="fa fa-file"></i> {{file.Extension}}</span>
                                                                        </div>
                                                                        <div ng-if="file.LatestVersion" class="tags hide_in_colorlist" style=" position: absolute; right: 10px; top: 10px; color: #fff; font-size: 10px;">
                                                                            <span class="bg-dark text-white" style="padding: 2px 4px; border-radius: 5px;">{{file.LatestVersion}}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="card-body p-1">
                                                                        <div class="row clearfix">
                                                                            <div class="col-10 text-nowrap overflow-ellipsis" title="{{file.Name}}">
                                                                                {{file.Name}}
                                                                            </div>
                                                                            <div class="col-2 text-right">
                                                                                <div class="item-action dropdown">
                                                                                    <a href="javascript:void(0)" data-toggle="dropdown" class="icon" aria-expanded="false">
                                                                                        <i class="fe fe-more-vertical"></i>
                                                                                    </a>
                                                                                    <div class="dropdown-menu dropdown-menu-right" x-placement="top-end" style="position: absolute; transform: translate3d(-178px, -285px, 0px); top: 0px; left: 0px; will-change: transform;">
                                                                                        <a href="javascript:void(0)" ng-click="deleteFile($event,file)" class="dropdown-item">
                                                                                            <i class="fa fa-trash">
                                                                                            </i> Delete
                                                                                        </a>
                                                                                        <a href="javascript:void(0)" ng-if="false" ng-click="makeDefault($event,file)" class="dropdown-item">
                                                                                            <i class="fa fa-file-picture-o">
                                                                                            </i> Select Thumbnail
                                                                                        </a>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!--<div class="row clearfix" ng-if="files.length>0">
                                                            <div class="col-sm-12">
                                                                <ul uib-pagination
                                                                    total-items="tabContentLength.filesCount"
                                                                    ng-model="filesPaging.page"
                                                                    items-per-page="12"
                                                                    previous-text="&lsaquo;"
                                                                    next-text="&rsaquo;"
                                                                    class="pull-right font-15"
                                                                    ng-change="getDocumentCatFiles()"
                                                                    boundary-link-numbers="true"
                                                                    rotate="false">
                                                                </ul>
                                                            </div>
                                                        </div>-->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 py-5 text-right">
                                            <button class="btn btn-primary btn-sm text-right btn-back">Done</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="carousel-item" style="min-height:500px;">
            <div class="modal-header">

                <h3 class="modal-title" id="modal-title">
                    <button class="btn btn-sm btn-dark btn-back "><i class="fa fa-arrow-left"></i></button>
                    Edit visability
                </h3>

            </div>
            <div class="modal-body" id="modal-body">

                <div class="container-fluid">
                    <h6>Here you can select for which users besides the participants the event should be displayed in the calendar.</h6>
                    <div class="panel-body">
                        <div class="row clearfix">
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="form-group">
                                            <label class="form-label">
                                                Also visible for
                                            </label>
                                            <ui-select multiple class="form-control" ng-model="event.AdditionalViewers" theme="selectize" sortable="true" close-on-select="false">
                                                <ui-select-match>{{$item.name}}</ui-select-match>
                                                <ui-select-choices group-by="groupUsers" repeat="visible as visible in projectUsersAndGroups">
                                                    <div class="row p-10 clearfix">
                                                        <div class="col-sm-1">
                                                            <img class="rounded img-fluid" src="{{visible.avatar}}" alt="" />
                                                        </div>
                                                        <div class="col-sm-11">
                                                            <div ng-bind-html="visible.name | highlight: $select.search">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 py-5 text-right">
                                <button class="btn btn-primary btn-sm text-right btn-back">Done</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>


    </div>
</div>


<script>
    $(document).ready(function () {

        //$('.multiselect').multiselect({
        //    enableFiltering: true,
        //    enableCaseInsensitiveFiltering: true,
        //    maxHeight: 200
        //});
        //$('.srch').hide();
        $('.add-char-btn').click(() => {
            $('.srch').fadeIn("slow");
            $('.add-char-div').hide();
        });
        $('.close-srch').click(() => {
            $('.srch').hide("slow");

            $('.add-char-div').show();
        });
        $('.btn-back').click(() => {

            $(".carousel").carousel(0);

        })

        $('.add-char').click(() => {

            $(".carousel").carousel(1);
        });
        $('.add-extra').click(() => {

            $(".carousel").carousel(2);
        });
        $('.shooting-info').click(() => {

            $(".carousel").carousel(3);
        });
        $('.edit-visibility').click(() => {

            $(".carousel").carousel(5);
        });
        $('.add-img').click(() => {

            $(".carousel").carousel(4);
        });
    });
</script>
