<link href="../../../css/step-wizard.css" rel="stylesheet" />


<div class="modal-header">
    <h3 class="modal-title" id="modal-title">
        {{title}}
    </h3>
    <div class="pull-right">
        <button class="btn btn-secondary " ng-disabled="projectForm.$invalid" ng-click="save()">
            <i class="fa fa-save"></i> Invite
        </button>
        <button class="btn btn-danger" ng-click="cancel()">
            <i class="fa fa-times"></i> Close
        </button>
    </div>
</div>
<div class="modal-body" id="modal-body">
    <div class="container-fluid">
        <div class="container">
            <div class="stepwizard">
                <div class="stepwizard-row setup-panel">
                    <div class="stepwizard-step col-xs-3">
                        <a href="#step-1" type="button" class="btn btn-default btn-circle btn-success"><i class="fa fa-info-circle" ></i></a>
                        <p><small>General Information</small></p>
                    </div>
                    
                </div>
            </div>

            <form role="form" name="projectForm">
                <div class="panel panel-primary setup-content" id="step-1">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                        </h4>
                    </div>

                    <div class="panel-body">
                        <div class="row clearfix">
                            <div class="col-sm-12">
                               

                                <div class="card">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">Email</label>
                                                    <input maxlength="200" ng-pattern-check="^[^\s@]+@[^\s@]+\.[^\s@]{2,}$" required="required" name="Email" class="form-control {{projectForm.Email.$valid?'is-valid':'is-invalid'}}"
                                                           placeholder="Email" ng-model="projectExternalUser.Email" />
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">Name (Required)</label>
                                                    <input maxlength="200" ng-pattern-check="^[A-Za-z ]*$" type="text" name="FirstName" required="required" class="form-control  {{projectForm.FirstName.$valid?'is-valid':'is-invalid'}}"
                                                           placeholder="Name (Required)" ng-model="projectExternalUser.Name" />
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">
                                                        Phone Home
                                                    </label>
                                                    <input maxlength="200" type="text" name="LastName" class="form-control  "
                                                           placeholder="Name" ng-model="projectExternalUser.PhoneHome" />
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">
                                                        Phone Mobile
                                                    </label>
                                                    <input maxlength="200" type="text" name="LastName" class="form-control "
                                                           placeholder="Name" ng-model="projectExternalUser.PhoneMobile" />
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">
                                                        Phone Office
                                                    </label>
                                                    <input maxlength="200" type="text" name="LastName" class="form-control  "
                                                           placeholder="Name" ng-model="projectExternalUser.PhoneOffice" />
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-sm-12">
                                                <div class="form-group">
                                                    <label class="form-label">
                                                        Position
                                                    </label>
                                                    <select name="PositionId" class="form-control custom-select {{projectForm.PositionId.$valid?'is-valid':'is-invalid'}}" 
                                                            required="required" ng-options="item.Id as item.Name for item in workingPositions"
                                                            ng-model="projectExternalUser.PositionId">
                                                    </select>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="card comments" style="height:90% !important">
                                            <div class="card-body">
                                                <i class="fa fa-info-circle"></i>
                                                View and manage the employees / staff members of your company. You can choose which global rights they receive and which sections in the company area they can access
                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<div class="modal-footer">
    <button class="btn btn-secondary pull-right" ng-disabled="projectForm.$invalid" ng-click="save()">
        <i class="fa fa-save"></i> Invite
    </button>
    <button class="btn btn-danger" ng-click="cancel()">
        <i class="fa fa-times"></i> Close
    </button>
</div>


<script>
    $(document).ready(function () {

        //$('.multiselect').multiselect({
        //    enableFiltering: true,
        //    enableCaseInsensitiveFiltering: true,
        //    maxHeight: 200
        //});

        var navListItems = $('div.setup-panel div a'),
            allWells = $('.setup-content'),
            allNextBtn = $('.nextBtn');

        allWells.hide();

        navListItems.click(function (e) {
            e.preventDefault();
            var $target = $($(this).attr('href')),
                $item = $(this);

            if (!$item.hasClass('disabled')) {
                navListItems.removeClass('btn-success').addClass('btn-default');
                $item.addClass('btn-success');
                allWells.hide();
                $target.show();
                $target.find('input:eq(0)').focus();
            }
        });

        allNextBtn.click(function () {
            var curStep = $(this).closest(".setup-content"),
                curStepBtn = curStep.attr("id"),
                nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                curInputs = curStep.find("input[type='text'],input[type='url']"),
                isValid = true;

            $(".form-group").removeClass("has-error");
            for (var i = 0; i < curInputs.length; i++) {
                if (!curInputs[i].validity.valid) {
                    isValid = false;
                    $(curInputs[i]).closest(".form-group").addClass("has-error");
                }
            }

            //if (isValid)
                nextStepWizard.removeAttr('disabled').trigger('click');
        });

        $('div.setup-panel div a.btn-success').trigger('click');

        var input = document.querySelector(".telephone");
        window.intlTelInput(input, {
            utilsScript: root + 'plugins/intl-tel-input/js/utils.js?20',
        });

    });
</script>